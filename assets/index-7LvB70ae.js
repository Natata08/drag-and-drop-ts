(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();class u{templateElement;hostElement;element;constructor(e,n,i,t){this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(n);const s=document.importNode(this.templateElement.content,!0);this.element=s.firstElementChild,t&&(this.element.id=t),this.attach(i)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}function a(r){let e=!0;return r.required&&(e=e&&r.value.toString().trim().length!==0),r.minLength!=null&&typeof r.value=="string"&&(e=e&&r.value.length>=r.minLength),r.maxLength!=null&&typeof r.value=="string"&&(e=e&&r.value.length<=r.maxLength),r.min!=null&&typeof r.value=="number"&&(e=e&&r.value>=r.min),r.max!=null&&typeof r.value=="number"&&(e=e&&r.value<=r.max),e}function c(r,e,n){const i=n.value;return{configurable:!0,get(){return i.bind(this)}}}var l=(r=>(r[r.Active=0]="Active",r[r.Finished=1]="Finished",r))(l||{});class v{constructor(e,n,i,t,s){this.id=e,this.title=n,this.description=i,this.people=t,this.status=s}}class j{listeners=[];addListener(e){this.listeners.push(e)}}class h extends j{projects=[];static instance;constructor(){super()}static getInstance(){return this.instance?this.instance:(this.instance=new h,this.instance)}addProject(e,n,i){const t=new v(Math.random().toString(),e,n,i,l.Active);this.projects.push(t),this.updateListeners()}moveProject(e,n){const i=this.projects.find(t=>t.id===e);i&&i.status!==n&&(i.status=n,this.updateListeners())}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}const p=h.getInstance();var y=Object.defineProperty,E=Object.getOwnPropertyDescriptor,P=(r,e,n,i)=>{for(var t=E(e,n),s=r.length-1,o;s>=0;s--)(o=r[s])&&(t=o(e,n,t)||t);return t&&y(e,n,t),t};class f extends u{titleInputElement;descriptionInputElement;peopleInputElement;constructor(){super("project-input","app",!0,"user-input"),this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people"),this.configure()}configure(){this.element.addEventListener("submit",this.submitHandler)}renderContent(){}gatherUserInput(){const e=this.titleInputElement.value,n=this.descriptionInputElement.value,i=this.peopleInputElement.value,t={value:e,required:!0},s={value:n,required:!0,minLength:5},o={value:+i,required:!0,min:1,max:5};if(!a(t)||!a(s)||!a(o)){alert("Invalid input");return}else return[e,n,+i]}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitHandler(e){e.preventDefault();const n=this.gatherUserInput();if(Array.isArray(n)){const[i,t,s]=n;p.addProject(i,t,s),this.clearInputs()}}}P([c],f.prototype,"submitHandler");var L=Object.defineProperty,O=Object.getOwnPropertyDescriptor,_=(r,e,n,i)=>{for(var t=O(e,n),s=r.length-1,o;s>=0;s--)(o=r[s])&&(t=o(e,n,t)||t);return t&&L(e,n,t),t};class g extends u{project;get persons(){return this.project.people===1?"1 person":`${this.project.people} persons`}constructor(e,n){super("single-project",e,!1,n.id),this.project=n,this.configure(),this.renderContent()}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.persons+" assigned.",this.element.querySelector("p").textContent=this.project.description}}_([c],g.prototype,"dragStartHandler");var H=Object.defineProperty,q=Object.getOwnPropertyDescriptor,m=(r,e,n,i)=>{for(var t=q(e,n),s=r.length-1,o;s>=0;s--)(o=r[s])&&(t=o(e,n,t)||t);return t&&H(e,n,t),t};class d extends u{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.configure(),this.renderContent()}assignedProjects;dragOverHandler(e){e.dataTransfer&&e.dataTransfer.types[0]==="text/plain"&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dropHandler(e){const n=e.dataTransfer.getData("text/plain");p.moveProject(n,this.type==="active"?l.Active:l.Finished)}dragLeaveHandler(e){this.element.querySelector("ul").classList.remove("droppable")}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("drop",this.dropHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),p.addListener(e=>{const n=e.filter(i=>this.type==="active"?i.status===l.Active:i.status===l.Finished);this.assignedProjects=n,this.renderProjects()})}renderContent(){const e=`${this.type}-projects-list`;this.element.querySelector("ul").id=e,this.element.querySelector("h2").textContent=this.type.toUpperCase()+" PROJECTS"}renderProjects(){const e=document.getElementById(`${this.type}-projects-list`);e.innerHTML="";for(const n of this.assignedProjects)new g(this.element.querySelector("ul").id,n)}}m([c],d.prototype,"dragOverHandler");m([c],d.prototype,"dropHandler");m([c],d.prototype,"dragLeaveHandler");new f;new d("active");new d("finished");
